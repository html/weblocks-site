function eachStep(a,b,c){if(a.length==0){return c&&c()}jQuery.when(b(a[0])).always(function(){eachStep(a.slice(1),b,c)})}
function sequentialExecute(a,b){if(a.length==0){return b&&b()}jQuery.when(a[0]()).always(function(){sequentialExecute(a.slice(1),b)})}
function getGenerator(a){return function(b,c){return eachStep(b,a,c)}}
function cachingGetGenerator(a){var b=function(c,d){if(c.length==0){return d&&d()}var e=c[0];var f=b;var g=function(){f(c.slice(1),d)};if(cache.indexOf(e)==-1){a(e,function(){cache.push(e);g()})}else{g()}};return b}
function withGetGenerator(a){return function(){var c=window.$;window.$=jQuery;var d=Array.prototype.slice.call(arguments,0,arguments.length-1);var e=arguments[arguments.length-1];a(d,function(){e();window.$=c})}}
function loadImage(a){var b=jQuery.Deferred();if(typeof loadImageCache[a]==="undefined"){preloader=new Image;preloader.onload=function(){b.resolve(this.src)};preloader.onerror=function(){console&&console.log("Can not load an image "+this.src);b.reject(this.src)};preloader.src=a;loadImageCache[a]=true}else{console&&console.log("Image cached "+a);b.resolve(a)}return b}
function appendStyleSheet(a){var b=document.getElementsByTagName("head").item(0);var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",a);b.appendChild(c);return false}
function loadStyleSheet(a,b){return jQuery.get(a,function(){appendStyleSheet(a);b&&b()})}
var cache=[];var loadImageCache={};getScripts=getGenerator(jQuery.getScript);getImages=getGenerator(loadImage);getFiles=getGenerator(jQuery.get);getStyles=getGenerator(loadStyleSheet);getScriptsNotCached=cachingGetGenerator(jQuery.getScript);getStylesNotCached=cachingGetGenerator(loadStyleSheet);withScripts=withGetGenerator(getScriptsNotCached);withStyles=withGetGenerator(getStylesNotCached)
